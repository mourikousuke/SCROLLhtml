<?xml version='1.0' encoding='utf-8'?>
<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <title>danstools</title>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
  <link href="stylesheet.css" rel="stylesheet" type="text/css"/>
<link href="page_styles.css" rel="stylesheet" type="text/css"/>
</head>
  <body class="calibre">
<h2 class="calibre3" id="calibre_pb_8">2 ns</h2><p class="calibre1">4</p>
<p class="softbreak"> </p>
<p class="calibre1">第３回課題１（小テスト）（1/2）</p>
<p class="calibre1">l  あるプロセッサにおいて、以下の４種類の命令タイプを実装す</p>
<p class="calibre1">ることを考える。各命令タイプの命令実行の各ステップにおける</p>
<p class="calibre1">所要時間は下表の通りとする。</p>
<p class="calibre1">命令タイプ</p>
<p class="softbreak"> </p>
<p class="calibre1">命令フェッチ</p>
<p class="softbreak"> </p>
<p class="calibre1">レジスタ読出し</p>
<p class="whitespace"> </p>
<p class="calibre1">ALU演算</p>
<p class="whitespace"> </p>
<p class="calibre1">データアクセス</p>
<p class="calibre1">レジスタ書込み</p>
<p class="whitespace"> </p>
<p class="calibre1">ロード命令</p>
<p class="whitespace"> </p>
<p class="calibre1">1000ps</p>
<p class="whitespace"> </p>
<p class="calibre1">300ps</p>
<p class="whitespace"> </p>
<p class="calibre1">700ps</p>
<p class="whitespace"> </p>
<p class="calibre1">1000ps</p>
<p class="whitespace"> </p>
<p class="calibre1">ストア命令</p>
<p class="whitespace"> </p>
<p class="calibre1">1000ps</p>
<p class="whitespace"> </p>
<p class="calibre1">300ps</p>
<p class="whitespace"> </p>
<p class="calibre1">700ps</p>
<p class="whitespace"> </p>
<p class="calibre1">1000ps</p>
<p class="whitespace"> </p>
<p class="calibre1">演算命令</p>
<p class="whitespace"> </p>
<p class="calibre1">1000ps</p>
<p class="whitespace"> </p>
<p class="calibre1">300ps</p>
<p class="whitespace"> </p>
<p class="calibre1">700ps</p>
<p class="whitespace"> </p>
<p class="calibre1">分岐命令</p>
<p class="whitespace"> </p>
<p class="calibre1">1000ps</p>
<p class="whitespace"> </p>
<p class="calibre1">300ps</p>
<p class="whitespace"> </p>
<p class="calibre1">800ps</p>
<p class="whitespace"> </p>
<p class="calibre1">400ps</p>
<p class="whitespace"> </p>
<p class="calibre1">400ps</p>
<p class="whitespace"> </p>
<p class="calibre1">1)  以下の２種類のプロセッサ構成方式を採った場合のクロックサイクル</p>
<p class="calibre1">時間（単位はns）、各命令タイプの実行所要時間（単位はns）および実</p>
<p class="calibre1">行所要クロックサイクル数を求めよ。</p>
<p class="calibre1">l  シングルサイクル・データパス：１命令の実行を１クロックサイクルで実行。</p>
<p class="calibre1">l  命令パイプライン処理：上記の各ステップを１パイプラインステージとし、１ス</p>
<p class="calibre1">テージを１クロックサイクルで実行。</p>
<p class="calibre1">コンピュータアーキテクチャⅡ</p>
<p class="whitespace"> </p>
<p class="calibre1">5</p>
<p class="whitespace"> </p>
<p class="calibre1">第３回課題１（小テスト）（2/2）</p>
<p class="calibre1">2)  上記２種類の異なるプロセッサ構成方式を採用したプロセッサにおい</p>
<p class="calibre1">て以下のプログラムを実行した際のプログラム実行時間（単位はns）</p>
<p class="calibre1">を求めよ。なお、命令パイプライン処理においてはデータハザード（後</p>
<p class="calibre1">述）を無視するものとする。</p>
<p class="calibre1">lw $2, 20($1)</p>
<p class="calibre1">and $12, $2, $5</p>
<p class="calibre1">or $13, $6, $2</p>
<p class="calibre1">add $14, $2, $2</p>
<p class="calibre1">sw $15, 100($2)</p>
<p class="softbreak"> </p>
<p class="calibre1">コンピュータアーキテクチャⅡ</p>
<p class="softbreak"> </p>
<p class="calibre1">（R2←Memory[R1+20]）</p>
<p class="calibre1">（R12←R2∧R5）</p>
<p class="calibre1">（R13←R6∨R2）</p>
<p class="calibre1">（R14←R2＋R2）</p>
<p class="calibre1">（R15→Memory[R2+100]）</p>
<p class="whitespace"> </p>
<p class="calibre1">6</p>
<p class="whitespace"> </p>
<p class="calibre1">命令パイプライン（パイプライン化データパス）の設計</p>
<p class="whitespace"> </p>
<p class="calibre1">～開始点：シングルサイクル・データパス～</p>
<p class="calibre1">PCSrc</p>
<p class="calibre1">0</p>
<p class="scenebreak">+</p>
<p class="calibre1">4</p>
<p class="calibre1">31-26</p>
<p class="whitespace"> </p>
<p class="calibre1">主制御部</p>
<p class="whitespace"> </p>
<p class="calibre1">25-21</p>
<p class="calibre1">20-16</p>
<p class="whitespace"> </p>
<p class="calibre1">Ｐ</p>
<p class="calibre1">命令メモリ</p>
<p class="calibre1">inst</p>
<p class="calibre1">Ｃ</p>
<p class="calibre1">adrs</p>
<p class="whitespace"> </p>
<p class="calibre1">2bit</p>
<p class="calibre1">左シフト</p>
<p class="calibre1">rreg1</p>
<p class="calibre1">RegWrite</p>
<p class="calibre1">rd1</p>
<p class="calibre1">rreg2</p>
<p class="whitespace"> </p>
<p class="calibre1">0</p>
<p class="calibre1">15-11</p>
<p class="calibre1">1</p>
<p class="calibre1">RegDst</p>
<p class="whitespace"> </p>
<p class="calibre1">wreg</p>
<p class="whitespace"> </p>
<p class="calibre1">0</p>
<p class="whitespace"> </p>
<p class="calibre1">rd2</p>
<p class="whitespace"> </p>
<p class="calibre1">b</p>
<p class="whitespace"> </p>
<p class="calibre1">Ａ</p>
<p class="calibre1">Ｌ</p>
<p class="calibre1">Ｕ</p>
<p class="whitespace"> </p>
<p class="calibre1">1</p>
<p class="calibre1">ALUSrc</p>
<p class="whitespace"> </p>
<p class="calibre1">wd</p>
<p class="scenebreak">+</p><p class="calibre1">Branch</p>
<p class="whitespace"> </p>
<p class="calibre1">zero</p>
<p class="whitespace"> </p>
<p class="calibre1">a</p>
<p class="whitespace"> </p>
<p class="calibre1">レジスタ</p>
<p class="calibre1">ファイル</p>
<p class="whitespace"> </p>
<p class="calibre1">1</p>
<p class="whitespace"> </p>
<p class="calibre1">y</p>
<p class="calibre1">MemRead</p>
<p class="calibre1">MemWrite</p>
<p class="calibre1">adrs</p>
<p class="whitespace"> </p>
<p class="calibre1">データメモリ</p>
<p class="calibre1">wd</p>
<p class="whitespace"> </p>
<p class="calibre1">15-0</p>
<p class="calibre1">16</p>
<p class="calibre1">5-0</p>
<p class="whitespace"> </p>
<p class="calibre1">2</p>
<p class="calibre1">6</p>
<p class="whitespace"> </p>
<p class="calibre1">コンピュータアーキテクチャⅡ</p>
<p class="whitespace"> </p>
<p class="calibre1">符号拡張</p>
<p class="whitespace"> </p>
<p class="calibre1">rd</p>
<p class="whitespace"> </p>
<p class="calibre1">１</p>
<p class="calibre1">0</p>
<p class="whitespace"> </p>
<p class="calibre1">32</p>
<p class="calibre1">ALUOp</p>
<p class="whitespace"> </p>
<p class="calibre1">MemToReg</p>
<p class="whitespace"> </p>
<p class="calibre1">ALU制御部</p>
<p class="calibre1">3</p>
<p class="whitespace"> </p>
<p class="calibre1">ALUctrl</p>
<p class="whitespace"> </p>
<p class="calibre1">7</p>
<p class="whitespace"> </p>
<p class="calibre1">データパスのパイプライン化（１）</p>
<p class="whitespace"> </p>
<p class="calibre1">－シングルサイクル・データパスを複数のステージに分割－</p>
<p class="calibre1">①IF</p>
<p class="whitespace"> </p>
<p class="calibre1">②ID</p>
<p class="whitespace"> </p>
<p class="calibre1">③EX</p>
<p class="whitespace"> </p>
<p class="calibre1">④MEM</p>
<p class="whitespace"> </p>
<p class="calibre1">⑤</p>
<p class="calibre1">WB</p>
<p class="whitespace"> </p>
<p class="calibre1">Add</p>
<p class="calibre1">Add</p>
<p class="whitespace"> </p>
<p class="calibre1">4</p>
<p class="calibre1">Shift</p>
<p class="calibre1">Left 2</p>
<p class="calibre1">Registers</p>
<p class="calibre1">PC</p>
<p class="whitespace"> </p>
<p class="calibre1">Address</p>
<p class="calibre1">Instruction</p>
<p class="calibre1">Instruction</p>
<p class="calibre1">Memory</p>
<p class="whitespace"> </p>
<p class="calibre1">Read</p>
<p class="calibre1">Register1</p>
<p class="calibre1">Read</p>
<p class="calibre1">Register2</p>
<p class="calibre1">Write</p>
<p class="calibre1">Register</p>
<p class="calibre1">Write</p>
<p class="calibre1">Data</p>
<p class="whitespace"> </p>
<p class="calibre1">Read</p>
<p class="calibre1">Data1</p>
<p class="calibre1">Read</p>
<p class="calibre1">Data2</p>
<p class="whitespace"> </p>
<p class="calibre1">ALU</p>
<p class="calibre1">ALU</p>
<p class="calibre1">Result</p>
<p class="whitespace"> </p>
<p class="calibre1">Address</p>
<p class="whitespace"> </p>
<p class="calibre1">Write</p>
<p class="calibre1">Data</p>
<p class="whitespace"> </p>
<p class="calibre1">Read</p>
<p class="calibre1">Data</p>
<p class="whitespace"> </p>
<p class="calibre1">Data</p>
<p class="calibre1">Memory</p>
<p class="whitespace"> </p>
<p class="calibre1">Sign</p>
<p class="calibre1">Extend</p>
<p class="whitespace"> </p>
<p class="calibre1">コンピュータアーキテクチャⅡ</p>
<p class="whitespace"> </p>
<p class="calibre1">8</p>
<p class="whitespace"> </p>
<p class="calibre1">データパスのパイプライン化（１）</p>
<p class="whitespace"> </p>
<p class="calibre1">－シングルサイクル・データパスを複数のステージに分割－</p>
<p class="calibre1">①IF</p>
<p class="whitespace"> </p>
<p class="calibre1">②ID</p>
<p class="whitespace"> </p>
<p class="calibre1">③EX</p>
<p class="whitespace"> </p>
<p class="calibre1">④MEM</p>
<p class="whitespace"> </p>
<p class="calibre1">⑤</p>
<p class="calibre1">WB</p>
<p class="whitespace"> </p>
<p class="calibre1">Add</p>
<p class="calibre1">Add</p>
<p class="whitespace"> </p>
<p class="calibre1">4</p>
<p class="calibre1">Shift</p>
<p class="calibre1">Left 2</p>
<p class="calibre1">Registers</p>
<p class="whitespace"> </p>
<p class="calibre1">PC</p>
<p class="whitespace"> </p>
<p class="calibre1">Address</p>
<p class="whitespace"> </p>
<p class="calibre1">しかし，このままでは</p>
<p class="calibre1">動作不能</p>
<p class="whitespace"> </p>
<p class="calibre1">Instruction</p>
<p class="calibre1">Instruction</p>
<p class="calibre1">Memory</p>
<p class="whitespace"> </p>
<p class="calibre1">Read</p>
<p class="calibre1">Register1</p>
<p class="calibre1">Read</p>
<p class="calibre1">Register2</p>
<p class="calibre1">Write</p>
<p class="calibre1">Register</p>
<p class="calibre1">Write</p>
<p class="calibre1">Data</p>
<p class="whitespace"> </p>
<p class="calibre1">Read</p>
<p class="calibre1">Data1</p>
<p class="whitespace"> </p>
<p class="calibre1">Read</p>
<p class="calibre1">Data2</p>
<p class="whitespace"> </p>
<p class="calibre1">ALU</p>
<p class="calibre1">ALU</p>
<p class="calibre1">Result</p>
<p class="whitespace"> </p>
<p class="calibre1">Address</p>
<p class="whitespace"> </p>
<p class="calibre1">Write</p>
<p class="calibre1">Data</p>
<p class="whitespace"> </p>
<p class="calibre1">Read</p>
<p class="calibre1">Data</p>
<p class="whitespace"> </p>
<p class="calibre1">Data</p>
<p class="calibre1">Memory</p>
<p class="whitespace"> </p>
<p class="calibre1">Sign</p>
<p class="calibre1">Extend</p>
<p class="whitespace"> </p>
<p class="calibre1">コンピュータアーキテクチャⅡ</p>
<p class="whitespace"> </p>
<p class="calibre1">9</p>
<p class="whitespace"> </p>
<p class="calibre1">第３回課題２（クイズ）</p>
<p class="calibre1">l  なぜ、前のスライドで「このままでは動作不能」としているのか、</p>
<p class="calibre1">その理由を考えよ！</p>
<p class="whitespace"> </p>
<p class="calibre1">コンピュータアーキテクチャⅡ</p>
<p class="whitespace"> </p>
<p class="calibre1">10</p>
<p class="whitespace"> </p>
<p class="calibre1">データパスのパイプライン化（２）</p>
<p class="whitespace"> </p>
<p class="calibre1">－パイプラインレジスタをステージ間に挿入－</p>
<p class="calibre1">①IF</p>
<p class="whitespace"> </p>
<p class="calibre1">②ID</p>
<p class="whitespace"> </p>
<p class="calibre1">③EX</p>
<p class="whitespace"> </p>
<p class="calibre1">④MEM</p>
<p class="whitespace"> </p>
<p class="calibre1">⑤</p>
<p class="calibre1">WB</p>
<p class="whitespace"> </p>
<p class="calibre1">Add</p>
<p class="calibre1">Add</p>
<p class="whitespace"> </p>
<p class="calibre1">4</p>
<p class="calibre1">Shift</p>
<p class="calibre1">Left 2</p>
<p class="calibre1">Registers</p>
<p class="whitespace"> </p>
<p class="calibre1">Instruction</p>
<p class="whitespace"> </p>
<p class="calibre1">IF/ID</p>
<p class="whitespace"> </p>
<p class="calibre1">Instruction</p>
<p class="calibre1">Memory</p>
<p class="whitespace"> </p>
<p class="calibre1">クロック信号</p>
<p class="whitespace"> </p>
<p class="calibre1">Read</p>
<p class="calibre1">Data1</p>
<p class="whitespace"> </p>
<p class="calibre1">ALU</p>
<p class="calibre1">ALU</p>
<p class="calibre1">Result</p>
<p class="whitespace"> </p>
<p class="calibre1">Read</p>
<p class="calibre1">Data2</p>
<p class="whitespace"> </p>
<p class="calibre1">Sign</p>
<p class="calibre1">Extend</p>
<p class="whitespace"> </p>
<p class="calibre1">Address</p>
<p class="whitespace"> </p>
<p class="calibre1">Write</p>
<p class="calibre1">Data</p>
<p class="whitespace"> </p>
<p class="calibre1">Read</p>
<p class="calibre1">Data</p>
<p class="whitespace"> </p>
<p class="calibre1">Data</p>
<p class="calibre1">Memory</p>
<p class="whitespace"> </p>
<p class="calibre1">MEM/WB</p>
<p class="whitespace"> </p>
<p class="calibre1">Address</p>
<p class="whitespace"> </p>
<p class="calibre1">EX/MEM</p>
<p class="whitespace"> </p>
<p class="calibre1">Read</p>
<p class="calibre1">Register1</p>
<p class="calibre1">Read</p>
<p class="calibre1">Register2</p>
<p class="calibre1">Write</p>
<p class="calibre1">Register</p>
<p class="calibre1">Write</p>
<p class="calibre1">Data</p>
<p class="whitespace"> </p>
<p class="calibre1">ID/EX</p>
<p class="whitespace"> </p>
<p class="calibre1">PC</p>
<p class="whitespace"> </p>
<p class="calibre1">11</p>
<p class="whitespace"> </p>
<p class="calibre1">データパスのパイプライン化（２）</p>
<p class="whitespace"> </p>
<p class="calibre1">－パイプラインレジスタをステージ間に挿入－</p>
<p class="calibre1">①IF</p>
<p class="whitespace"> </p>
<p class="calibre1">②ID</p>
<p class="whitespace"> </p>
<p class="calibre1">③EX</p>
<p class="whitespace"> </p>
<p class="calibre1">④MEM</p>
<p class="whitespace"> </p>
<p class="calibre1">⑤</p>
<p class="calibre1">WB</p>
<p class="whitespace"> </p>
<p class="calibre1">Add</p>
<p class="calibre1">Add</p>
<p class="whitespace"> </p>
<p class="calibre1">4</p>
<p class="calibre1">Shift</p>
<p class="calibre1">Left 2</p>
<p class="calibre1">Registers</p>
<p class="whitespace"> </p>
<p class="calibre1">Instruction</p>
<p class="whitespace"> </p>
<p class="calibre1">IF/ID</p>
<p class="whitespace"> </p>
<p class="calibre1">Instruction</p>
<p class="calibre1">Memory</p>
<p class="whitespace"> </p>
<p class="calibre1">クロック信号</p>
<p class="whitespace"> </p>
<p class="calibre1">Read</p>
<p class="calibre1">Data1</p>
<p class="whitespace"> </p>
<p class="calibre1">ALU</p>
<p class="whitespace"> </p>
<p class="calibre1">Read</p>
<p class="calibre1">Data2</p>
<p class="whitespace"> </p>
<p class="calibre1">Sign</p>
<p class="calibre1">Extend</p>
<p class="whitespace"> </p>
<p class="calibre1">ALU</p>
<p class="calibre1">Result</p>
<p class="whitespace"> </p>
<p class="calibre1">Address</p>
<p class="whitespace"> </p>
<p class="calibre1">Write</p>
<p class="calibre1">Data</p>
<p class="whitespace"> </p>
<p class="calibre1">Read</p>
<p class="calibre1">Data</p>
<p class="whitespace"> </p>
<p class="calibre1">Data</p>
<p class="calibre1">Memory</p>
<p class="whitespace"> </p>
<p class="calibre1">MEM/WB</p>
<p class="whitespace"> </p>
<p class="calibre1">Read</p>
<p class="calibre1">Register1</p>
<p class="calibre1">Read</p>
<p class="calibre1">Register2</p>
<p class="calibre1">Write</p>
<p class="calibre1">Register</p>
<p class="calibre1">Write</p>
<p class="calibre1">Data</p>
<p class="whitespace"> </p>
<p class="calibre1">EX/MEM</p>
<p class="whitespace"> </p>
<p class="calibre1">Address</p>
<p class="whitespace"> </p>
<p class="calibre1">しかし，これでもまだ</p>
<p class="calibre1">問題あり</p>
<p class="whitespace"> </p>
<p class="calibre1">ID/EX</p>
<p class="whitespace"> </p>
<p class="calibre1">PC</p>
<p class="whitespace"> </p>
<p class="calibre1">12</p>
<p class="whitespace"> </p>
<p class="calibre1">第３回課題３（クイズ）</p>
<p class="calibre1">l  なぜ、前のスライドで「これでもまだ問題あり」としているのか、</p>
<p class="calibre1">その理由を考えよ！</p>
<p class="whitespace"> </p>
<p class="calibre1">コンピュータアーキテクチャⅡ</p>
<p class="whitespace"> </p>
<p class="calibre1">13</p>
<p class="whitespace"> </p>
<p class="calibre1">データパスのパイプライン化（３）</p>
<p class="calibre1">－WBステージで必要となる情報を伝搬－</p>
<p class="calibre1">①IF</p>
<p class="whitespace"> </p>
<p class="calibre1">②ID</p>
<p class="whitespace"> </p>
<p class="calibre1">③EX</p>
<p class="whitespace"> </p>
<p class="calibre1">④MEM</p>
<p class="whitespace"> </p>
<p class="calibre1">⑤</p>
<p class="calibre1">WB</p>
<p class="whitespace"> </p>
<p class="calibre1">Add</p>
<p class="calibre1">Add</p>
<p class="whitespace"> </p>
<p class="calibre1">4</p>
<p class="calibre1">Shift</p>
<p class="calibre1">Left 2</p>
<p class="calibre1">Registers</p>
<p class="whitespace"> </p>
<p class="calibre1">Instruction</p>
<p class="whitespace"> </p>
<p class="calibre1">IF/ID</p>
<p class="whitespace"> </p>
<p class="calibre1">Instruction</p>
<p class="calibre1">Memory</p>
<p class="whitespace"> </p>
<p class="calibre1">クロック信号</p>
<p class="whitespace"> </p>
<p class="calibre1">Read</p>
<p class="calibre1">Data1</p>
<p class="whitespace"> </p>
<p class="calibre1">ALU</p>
<p class="calibre1">ALU</p>
<p class="calibre1">Result</p>
<p class="whitespace"> </p>
<p class="calibre1">Read</p>
<p class="calibre1">Data2</p>
<p class="whitespace"> </p>
<p class="calibre1">Sign</p>
<p class="calibre1">Extend</p>
<p class="whitespace"> </p>
<p class="calibre1">Address</p>
<p class="whitespace"> </p>
<p class="calibre1">Write</p>
<p class="calibre1">Data</p>
<p class="whitespace"> </p>
<p class="calibre1">Read</p>
<p class="calibre1">Data</p>
<p class="whitespace"> </p>
<p class="calibre1">Data</p>
<p class="calibre1">Memory</p>
<p class="whitespace"> </p>
<p class="calibre1">MEM/WB</p>
<p class="whitespace"> </p>
<p class="calibre1">Address</p>
<p class="whitespace"> </p>
<p class="calibre1">EX/MEM</p>
<p class="whitespace"> </p>
<p class="calibre1">Read</p>
<p class="calibre1">Register1</p>
<p class="calibre1">Read</p>
<p class="calibre1">Register2</p>
<p class="calibre1">Write</p>
<p class="calibre1">Register</p>
<p class="calibre1">Write</p>
<p class="calibre1">Data</p>
<p class="whitespace"> </p>
<p class="calibre1">ID/EX</p>
<p class="whitespace"> </p>
<p class="calibre1">PC</p>
<p class="whitespace"> </p>
<p class="calibre1">14</p>
<p class="whitespace"> </p>
<p class="calibre1">データパスのパイプライン化（４）</p>
<p class="calibre1">－正確に描くと・・・－</p>
<p class="calibre1">0</p>
<p class="calibre1">M</p>
<p class="calibre1">u</p>
<p class="calibre1">x</p>
<p class="calibre1">1</p>
<p class="whitespace"> </p>
<p class="calibre1">IF/ID</p>
<p class="whitespace"> </p>
<p class="calibre1">ID/EX</p>
<p class="whitespace"> </p>
<p class="calibre1">EX/MEM</p>
<p class="whitespace"> </p>
<p class="calibre1">MEM/WB</p>
<p class="whitespace"> </p>
<p class="calibre1">Add</p>
<p class="calibre1">4</p>
<p class="calibre1">Instruction</p>
<p class="whitespace"> </p>
<p class="calibre1">PC</p>
<p class="whitespace"> </p>
<p class="calibre1">Add</p>
<p class="whitespace"> </p>
<p class="calibre1">Address</p>
<p class="calibre1">Instruction</p>
<p class="whitespace"> </p>
<p class="calibre1">Instruction</p>
<p class="calibre1">Memory</p>
<p class="whitespace"> </p>
<p class="calibre1">Shift</p>
<p class="calibre1">Left</p>
<p class="calibre1">2</p>
<p class="calibre1">Read</p>
<p class="calibre1">Register 1</p>
<p class="calibre1">Read</p>
<p class="calibre1">Register 2</p>
<p class="calibre1">Write</p>
<p class="calibre1">Register</p>
<p class="calibre1">Write</p>
<p class="calibre1">Data</p>
<p class="whitespace"> </p>
<p class="calibre1">Read</p>
<p class="calibre1">Data 2</p>
<p class="whitespace"> </p>
<p class="calibre1">Registers</p>
<p class="whitespace"> </p>
<p class="calibre1">Instruction</p>
<p class="calibre1">[15-0]</p>
<p class="calibre1">16</p>
<p class="calibre1">Instruction</p>
<p class="calibre1">[20-16]</p>
<p class="calibre1">Instruction</p>
<p class="calibre1">[15-11]</p>
<p class="whitespace"> </p>
<p class="calibre1">コンピュータアーキテクチャⅡ</p>
<p class="whitespace"> </p>
<p class="calibre1">Read</p>
<p class="calibre1">Data 1</p>
<p class="whitespace"> </p>
<p class="calibre1">ALU</p>
<p class="calibre1">Zero</p>
<p class="calibre1">0</p>
<p class="calibre1">M</p>
<p class="calibre1">u</p>
<p class="calibre1">x</p>
<p class="calibre1">1</p>
<p class="whitespace"> </p>
<p class="calibre1">ALU</p>
<p class="calibre1">Result</p>
<p class="whitespace"> </p>
<p class="calibre1">Address</p>
<p class="whitespace"> </p>
<p class="calibre1">Write</p>
<p class="calibre1">Data</p>
<p class="whitespace"> </p>
<p class="calibre1">Read</p>
<p class="calibre1">Data</p>
<p class="whitespace"> </p>
<p class="calibre1">Data</p>
<p class="calibre1">Memory</p>
<p class="whitespace"> </p>
<p class="calibre1">1</p>
<p class="calibre1">M</p>
<p class="calibre1">u</p>
<p class="calibre1">x</p>
<p class="calibre1">0</p>
<p class="whitespace"> </p>
<p class="calibre1">32</p>
<p class="calibre1">Sign</p>
<p class="calibre1">Extend</p>
<p class="whitespace"> </p>
<p class="calibre1">0</p>
<p class="calibre1">M</p>
<p class="calibre1">u</p>
<p class="calibre1">x</p>
<p class="calibre1">1</p>
<p class="whitespace"> </p>
<p class="calibre1">15</p>
<p class="whitespace"> </p>
<p class="calibre1">パイプライン・レジスタ</p>
<p class="calibre1">－まとめ－</p>
<p class="calibre1">パイプライン・</p>
<p class="calibre1">レジスタ</p>
<p class="calibre1">IF/ID</p>
<p class="whitespace"> </p>
<p class="calibre1">ID/EX</p>
<p class="whitespace"> </p>
<p class="calibre1">EX/MEM</p>
<p class="whitespace"> </p>
<p class="calibre1">MEM/WB</p>
<p class="whitespace"> </p>
<p class="calibre1">フィールド</p>
<p class="whitespace"> </p>
<p class="calibre1">意味</p>
<p class="whitespace"> </p>
<p class="calibre1">IR</p>
<p class="whitespace"> </p>
<p class="calibre1">IFステージでフェッチされた命令32ビットを格納する命令レジスタ。</p>
<p class="whitespace"> </p>
<p class="calibre1">PC4</p>
<p class="whitespace"> </p>
<p class="calibre1">IFステージでフェッチされた命令のPCに4を加えた値。当該命令が分岐命令の場合、EXステージ</p>
<p class="calibre1">における分岐先命令アドレス生成に使用。</p>
<p class="whitespace"> </p>
<p class="calibre1">A</p>
<p class="whitespace"> </p>
<p class="calibre1">IRに格納されている命令のrsフィールドで指定されるレジスタの値を読み出した値。</p>
<p class="whitespace"> </p>
<p class="calibre1">B</p>
<p class="whitespace"> </p>
<p class="calibre1">IRに格納されている命令のrtフィールドで指定されるレジスタの値を読み出した値。</p>
<p class="whitespace"> </p>
<p class="calibre1">SE</p>
<p class="whitespace"> </p>
<p class="calibre1">IRに格納されている命令のビット15-0を32ビットに符号拡張した結果。</p>
<p class="whitespace"> </p>
<p class="calibre1">WR1</p>
<p class="whitespace"> </p>
<p class="calibre1">IRに格納されている命令のrdフィールド（R形式の場合）で指定されるレジスタ番号。</p>
<p class="whitespace"> </p>
<p class="calibre1">WR2</p>
<p class="whitespace"> </p>
<p class="calibre1">IRに格納されている命令のrtフィールド（I形式の場合）で指定されるレジスタ番号。</p>
<p class="whitespace"> </p>
<p class="calibre1">PC4*</p>
<p class="whitespace"> </p>
<p class="calibre1">IF/ID(PC4)を伝搬。</p>
<p class="whitespace"> </p>
<p class="calibre1">ALUOut</p>
<p class="whitespace"> </p>
<p class="calibre1">EXステージでALUを用いて演算した結果。</p>
<p class="whitespace"> </p>
<p class="calibre1">BA</p>
<p class="whitespace"> </p>
<p class="calibre1">EXステージで計算した分岐先アドレス。</p>
<p class="whitespace"> </p>
<p class="calibre1">Zero</p>
<p class="whitespace"> </p>
<p class="calibre1">EXステージでALUを用いて演算した結果が0か否か？</p>
<p class="whitespace"> </p>
<p class="calibre1">B*</p>
<p class="whitespace"> </p>
<p class="calibre1">ID/EX(B)を伝搬。</p>
<p class="whitespace"> </p>
<p class="calibre1">WR</p>
<p class="whitespace"> </p>
<p class="calibre1">命令形式に従って、ID/EX(WR1)かID/EX(WR2)の一方を選択して格納。</p>
<p class="whitespace"> </p>
<p class="calibre1">MDR</p>
<p class="whitespace"> </p>
<p class="calibre1">ロード命令がMEMステージで読み出した値。</p>
<p class="softbreak"> </p>
<p class="calibre1">ALUout*</p>
<p class="softbreak"> </p>
<p class="calibre1">EX/MEM(ALUOut)を伝搬。</p>
<p class="whitespace"> </p>
<p class="calibre1">WR*</p>
<p class="whitespace"> </p>
<p class="calibre1">EX/MEM(WR)を伝搬。</p>
<p class="whitespace"> </p>
<p class="calibre1">コンピュータアーキテクチャⅡ</p>
<p class="whitespace"> </p>
<p class="calibre1">16</p>
<p class="whitespace"> </p>
<p class="calibre1">命令パイプライン処理における命令実行過程</p>
<p class="calibre1">パイプライン・</p>
<p class="calibre1">ステージ</p>
<p class="softbreak"> </p>
<p class="calibre1">算術論理演算命令</p>
<p class="softbreak"> </p>
<p class="calibre1">ロード/ストア命令</p>
<p class="whitespace"> </p>
<p class="calibre1">１．命令フェッチ(IF)</p>
<p class="whitespace"> </p>
<p class="calibre1">IF/ID(IR)=InstructionMemory[PC]</p>
<p class="calibre1">IF/ID(PC4)=PC+4</p>
<p class="calibre1">PC=PC+4</p>
<p class="whitespace"> </p>
<p class="calibre1">２．命令デコード，</p>
<p class="calibre1">オペランド読出し</p>
<p class="calibre1">(ID)</p>
<p class="softbreak"> </p>
<p class="calibre1">ID/EX(A)=Reg[IR[25-21]]</p>
<p class="calibre1">ID/EX(B)=Reg[IR[20-16]]</p>
<p class="calibre1">ID/EX(SE)=sign-extend(IR[15-0])</p>
<p class="calibre1">ID/EX(PC4*)=PC4</p>
<p class="calibre1">ID/EX(WR1)=IR[15-10]</p>
<p class="calibre1">ID/EX(WR2)=IR[20-16]</p>
<p class="whitespace"> </p>
<p class="calibre1">３．命令実行(EX)</p>
<p class="whitespace"> </p>
<p class="calibre1">EX/MEM(ALUOut)</p>
<p class="calibre1">=A op B</p>
<p class="calibre1">EX/MEM(WR)</p>
<p class="calibre1">=WR1</p>
<p class="whitespace"> </p>
<p class="calibre1">４．メモリアクセス</p>
<p class="calibre1">(MEM)</p>
<p class="whitespace"> </p>
<p class="calibre1">MEM/WB(ALUout*)</p>
<p class="calibre1">=ALUout</p>
<p class="calibre1">MEM/WB(WR*)</p>
<p class="calibre1">=WR</p>
<p class="whitespace"> </p>
<p class="calibre1">MEM/WB(MDR)</p>
<p class="calibre1">=DataMemory[ALUOut]</p>
<p class="calibre1">MEM/WB(WR*)=WR</p>
<p class="whitespace"> </p>
<p class="calibre1">５．レジスタ書込み</p>
<p class="calibre1">(WB)</p>
<p class="whitespace"> </p>
<p class="calibre1">Reg[WR*]=ALUout*</p>
<p class="whitespace"> </p>
<p class="calibre1">Reg[WR*]=MDR</p>
<p class="whitespace"> </p>
<p class="calibre1">コンピュータアーキテクチャⅡ</p>
<p class="whitespace"> </p>
<p class="calibre1">EX/MEM(ALUOut)=A+SE</p>
<p class="calibre1">EX/MEM(B*)=B</p>
<p class="calibre1">EX/MEM(WR)=WR2</p>
<p class="whitespace"> </p>
<p class="calibre1">DataMemory[ALUOut]</p>
<p class="calibre1">=B*</p>
<p class="softbreak"> </p>
<p class="calibre1">分岐命令</p>
<p class="softbreak"> </p>
<p class="calibre1">EX/MEM(BA)</p>
<p class="calibre1">=PC4*+(SE&lt;&lt;2)</p>
<p class="calibre1">EX/MEM(Zero)</p>
<p class="calibre1">=1 if (A==B)</p>
<p class="calibre1">if (Zero==1)</p>
<p class="calibre1">then PC=BA</p>
<p class="whitespace"> </p>
<p class="calibre1">17</p>

</body></html>
